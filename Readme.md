# 项目介绍

- ：)
- BI，商业智能。说人话就是数据可视化或者报表可视化。
- BI平台就是可以分析数据，将数据以很直观的图表方式进行重点信息的展示的一种业务平台
- 真实的业务场景下的BI平台可能还会涉及分析和多数据源导入的操作，本项目只是实现利用人工智能，对已经采集好的数据进行重点信息可视化的功能
- 现有的BI平台是需要用户在导入数据后，手动选择要分析的数据列、选择要制作的表格信息、将做出来的图表整合为一个看板，达到数据可视化的目的
- 传统BI平台：https://chartcube.alipay.com/
- 本项目的BI实现是利用了人工智能，操作人员只需要在导入数据后，直接对平台描述出想要的效果，就可以得到看板，分析数据制作图表生成看板的工作交给AI。

# 项目点

- 人工智能进行数据分析和图表生成
- 消息队列进行图表的异步化生成

# 技术栈

- 前端：React、Umi、Ant Design Pro、Echarts
- 后端：SpringBoot、Mysql、MyBaties、RabbitMQ、AI接口、Easy Excel、Swagger + Knife4j、Hutool工具库

### 项目开发记录（没有完结就是持续踩坑中 ）T.T ...

- AI提词技巧
  - 持续输入、持续优化
  - 数据压缩（因为将数据喂给AI模型字段长度有限制，所以要尽可能的将数据进行压缩，以便传输更多的数据）
  - 在AI模型层面做角色预设要比在会话层面做效果更好一些
- 因为是对用户输入的表（Excel）内容进行分析，因此可以使用csv格式，对原本Excel格式的内容进行压缩
- 使用程序员鱼皮的  https://www.yucongming.com/  鱼聪明网站 作为项目的AI回答生成端
- 鱼聪明网站对API接口提供了简单的SDK，可以简化AI接入流程
- 因为用户可以自主上传文件，为了网站安全性，在前后端都做了针对文件大小和后缀名合规的文件校验
- 因为AI生成用户分析图表需要时间，因此为提供第二种异步生成的方式，即创建线程池，利用多线程异步的方式实现用户体验的增强


# 系统可优化点
- 为生成图表失败的记录定期查询进行重试，例如采用Guava Retrying
- 对于AI生成的解析是采用对AI模型的控制调教，即只是规定了AI返回的参数格式，这还是会有可能导致AI返回的参数不正确的情况（例如生成了多余的废话），所以对于AI生成完的结果，要做一些清洗再入库
- 因为采用的是线程池加阻塞队列的方式，并且阻塞队列的拒绝策略是直接拒绝抛出异常，数据库记录就会在对应的生成记录上标记当前记录为失败；所以可以设计一个补偿策略，即在系统空闲之余，定时查看数据库中是否存有失败记录，将其捞出重新入队进行数据分析
- 根据当前生成任务的执行状态，给用户发送消息通知；或者给“我的图表“界面增加一个刷新按钮或者指定一个定时刷新的策略，保证用户可以获得到图表生成的最新状态（轮询）
- 可以优化系统向大后端服务请求策略，即当前异步化使用的是线程池加阻塞队列的方式，线程池的核心线程参数是写死的，其实可以创建一个定时任务，间隔固定时间访问系统大后端依赖（AI能力）的负载情况，根据负载情况动态的调整当前线程池的核心线程数，从而做到最大化利用资源，即反向压力